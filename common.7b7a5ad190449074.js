(self.webpackChunkspear=self.webpackChunkspear||[]).push([[592],{2940:(v,_,n)=>{n.d(_,{R:()=>e});var u=n(4482),s=n(7359);function e(t,i){return(0,u.e)((0,s.U)(t,i,arguments.length>=2,!0))}},7359:(v,_,n)=>{n.d(_,{U:()=>s});var u=n(5403);function s(e,t,i,c,f){return function(d,h){var P=i,g=t,m=0;d.subscribe((0,u.x)(h,function(C){var E=m++;g=P?e(g,C,E):(P=!0,C),c&&h.next(g)},f&&function(){P&&h.next(g),h.complete()}))}}},7655:(v,_,n)=>{n.r(_),n.d(_,{CONTENT_PLUGIN:()=>I,ContentBinding:()=>C,ContentInstance:()=>E,ContentModule:()=>g,ContentPlugin:()=>m,ContentPluginEditorOptions:()=>b,ContentPluginManager:()=>O});var u=n(136),s=n(8486),e=n(3144),t=n(5671),i=n(6718),c=n(4055),f=n(8488),d=n(5813),h=n(9646),P=n(8154),g=function(){var r=(0,e.Z)(function o(){(0,t.Z)(this,o)});return r.\u0275fac=function(l){return new(l||r)},r.\u0275mod=i.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=i.\u0275\u0275defineInjector({imports:[c.CommonModule]}),r}(),m=function(r){(0,u.Z)(l,r);var o=(0,s.Z)(l);function l(a){var p;return(0,t.Z)(this,l),(p=o.call(this,a)).fileTypes=[],a&&(p.name=p.id,p.handler=void 0!==a.handler?a.handler:void 0,p.selectionComponent=a.selectionComponent?a.selectionComponent:void 0,p.renderComponent=a.renderComponent?a.renderComponent:void 0,p.editorComponent=a.editorComponent?a.editorComponent:void 0),p}return(0,e.Z)(l)}(d.Plugin),C=(0,e.Z)(function r(o){(0,t.Z)(this,r),o&&(this.type=o.type,this.id=o.id)}),E=(0,e.Z)(function r(o){(0,t.Z)(this,r),this.settings=[],o&&(this.pluginName=o.pluginName,o.settings&&(this.settings=o.settings.map(function(l){return new f.AttributeValue(l)})))}),b=(0,e.Z)(function r(o){(0,t.Z)(this,r),this.fullscreen=!1,o&&(this.fullscreen=o.fullscreen)}),I=new i.InjectionToken("ContentPlugin"),O=function(){var r=function(o){(0,u.Z)(a,o);var l=(0,s.Z)(a);function a(p,y){return(0,t.Z)(this,a),l.call(this,p,y)}return(0,e.Z)(a,[{key:"pluginDef",value:function(){return(0,h.of)(new d.PluginDef({name:"content"}))}}]),a}(d.BasePluginManager);return r.\u0275fac=function(l){return new(l||r)(i.\u0275\u0275inject(d.PluginConfigurationManager),i.\u0275\u0275inject(P.ModuleLoaderService))},r.\u0275prov=i.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},461:(v,_,n)=>{n.r(_),n.d(_,{BasePluginManager:()=>C,ConfigDiscovery:()=>m,Plugin:()=>b,PluginConfig:()=>E,PluginConfigModule:()=>O,PluginConfigurationManager:()=>g,PluginDef:()=>I,PluginModule:()=>P});var u=n(4902),s=n(3144),e=n(5671),t=n(6718),i=n(8154),c=n(9646),f=n(4128),d=n(4004),h=n(3900),P=function(){var r=(0,s.Z)(function o(){(0,e.Z)(this,o)});return r.\u0275fac=function(l){return new(l||r)},r.\u0275mod=t.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=t.\u0275\u0275defineInjector({imports:[i.UtilsModule]}),r}(),g=function(){var r=function(){function o(){(0,e.Z)(this,o),this.configs=[]}return(0,s.Z)(o,[{key:"addConfig",value:function(a){this.configs.push(a)}},{key:"getConfigs",value:function(){return this.configs}}]),o}();return r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),m=function(){var r=function(){function o(l,a){(0,e.Z)(this,o),this.pcm=l,this.moduleLoader=a}return(0,s.Z)(o,[{key:"loadPlugins",value:function(a){for(var p=this,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],M=this.pcm.getConfigs(),j=M.length,Z=[],R=function(D){for(var B=M[D].modules.length,L=function(A){M[D].modules[A].plugins.has(a.name)&&(0===y.length||y.some(function(U){return M[D].modules[A].plugins.get(a.name).findIndex(function(k){return k===U})>-1}))&&Z.push(p.moduleLoader.loadModule(M[D].modules[A].module))},T=0;T<B;T++)L(T)},w=0;w<j;w++)R(w);return 0===Z.length?(0,c.of)(!0):(0,f.D)(Z).pipe((0,d.U)(function(){return!0}))}}]),o}();return r.\u0275fac=function(l){return new(l||r)(t.\u0275\u0275inject(g),t.\u0275\u0275inject(i.ModuleLoaderService))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),C=function(){function r(o,l){(0,e.Z)(this,r),this.pcm=o,this.moduleLoader=l,this.pluginInstances=new Map,this.discoveryPipeline=[],this.discovery()}return(0,s.Z)(r,[{key:"discovery",value:function(){this.discoveryPipeline.push(new m(this.pcm,this.moduleLoader))}},{key:"addDiscovery",value:function(l){this.discoveryPipeline.push(l)}},{key:"register",value:function(l){this.pluginInstances.set(l.id,l)}},{key:"getPlugins",value:function(l){var a=this,p=l?l.filter(function(y){return!a.pluginInstances.has(y)}):[];return l&&0===p.length?(0,c.of)(new Map(l.map(function(y){return[y,a.pluginInstances.get(y)]}))):this.pluginDef().pipe((0,h.w)(function(y){return(0,f.D)(a.discoveryPipeline.map(function(M){return M.loadPlugins(y,p)})).pipe((0,d.U)(function(){return l?new Map(l.map(function(M){return[M,a.pluginInstances.get(M)]})):a.pluginInstances}))}))}},{key:"getPlugin",value:function(l){var a=this;return this.pluginInstances.has(l)?(0,c.of)(this.pluginInstances.get(l)):this.pluginDef().pipe((0,h.w)(function(p){return(0,f.D)(a.discoveryPipeline.map(function(y){return y.loadPlugins(p,[l])})).pipe((0,d.U)(function(){return a.pluginInstances.get(l)}))}))}}]),r}(),E=(0,s.Z)(function r(o){(0,e.Z)(this,r),this.modules=[],o&&o.modules&&(this.modules=o.modules.map(function(l){return new O(l)}))}),b=(0,s.Z)(function r(o){(0,e.Z)(this,r),o&&(this.id=o.id,this.title=o.title)}),I=(0,s.Z)(function r(o){(0,e.Z)(this,r),o&&(this.name=o.name)}),O=(0,s.Z)(function r(o){(0,e.Z)(this,r),o&&(this.module=o.module,o.plugins&&(this.plugins=new Map((0,u.Z)(o.plugins))))})},907:(v,_,n)=>{function u(s,e){(null==e||e>s.length)&&(e=s.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=s[t];return i}n.d(_,{Z:()=>u})},7326:(v,_,n)=>{function u(s){if(void 0===s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}n.d(_,{Z:()=>u})},5671:(v,_,n)=>{function u(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(_,{Z:()=>u})},3144:(v,_,n)=>{n.d(_,{Z:()=>e});var u=n(3997);function s(t,i){for(var c=0;c<i.length;c++){var f=i[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(t,(0,u.Z)(f.key),f)}}function e(t,i,c){return i&&s(t.prototype,i),c&&s(t,c),Object.defineProperty(t,"prototype",{writable:!1}),t}},7762:(v,_,n)=>{n.d(_,{Z:()=>s});var u=n(181);function s(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=(0,u.Z)(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var c=0,f=function(){};return{s:f,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(m){throw m},f}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var P,d=!0,h=!1;return{s:function(){i=i.call(e)},n:function(){var m=i.next();return d=m.done,m},e:function(m){h=!0,P=m},f:function(){try{!d&&null!=i.return&&i.return()}finally{if(h)throw P}}}}},8486:(v,_,n)=>{n.d(_,{Z:()=>c});var u=n(1120),s=n(8814),e=n(1002),t=n(7326);function c(f){var d=(0,s.Z)();return function(){var g,P=(0,u.Z)(f);if(d){var m=(0,u.Z)(this).constructor;g=Reflect.construct(P,arguments,m)}else g=P.apply(this,arguments);return function i(f,d){if(d&&("object"===(0,e.Z)(d)||"function"==typeof d))return d;if(void 0!==d)throw new TypeError("Derived constructors may only return object or undefined");return(0,t.Z)(f)}(this,g)}}},1120:(v,_,n)=>{function u(s){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(s)}n.d(_,{Z:()=>u})},136:(v,_,n)=>{n.d(_,{Z:()=>s});var u=n(9611);function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,u.Z)(e,t)}},8814:(v,_,n)=>{function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}n.d(_,{Z:()=>u})},9611:(v,_,n)=>{function u(s,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i})(s,e)}n.d(_,{Z:()=>u})},3997:(v,_,n)=>{n.d(_,{Z:()=>e});var u=n(1002);function e(t){var i=function s(t,i){if("object"!==(0,u.Z)(t)||null===t)return t;var c=t[Symbol.toPrimitive];if(void 0!==c){var f=c.call(t,i||"default");if("object"!==(0,u.Z)(f))return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"===(0,u.Z)(i)?i:String(i)}},1002:(v,_,n)=>{function u(s){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(s)}n.d(_,{Z:()=>u})},181:(v,_,n)=>{n.d(_,{Z:()=>s});var u=n(907);function s(e,t){if(e){if("string"==typeof e)return(0,u.Z)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return(0,u.Z)(e,t)}}}}]);